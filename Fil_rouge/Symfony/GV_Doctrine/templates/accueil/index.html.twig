{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }}Accueil
{% endblock %}

{% block body %}

<header class="flex flex-col justify-center items-center text-center color-fond2 py-20 px-4">
  <div>
    <h2 class="m-0 text-[36pt] md:text-[48pt]">Bienvenue chez,</h2>
    <h1 class="color-logo-text font-title m-0 text-[42pt] md:text-[64pt]">Green Village</h1>
    {% if app.user %}
      <h2 class="m-0 text-[36pt] md:text-[48pt]">{{ app.user.prenom|e('html_attr') }}</h2>
    {% endif %}
  </div>

  <div class="flex flex-wrap justify-center gap-4 mt-6">
    {% if app.user %}
      <a href="{{ path('app_categorie') }}" class="px-[40px] py-[11px] bg-[#369354] shadow-[0px_4px_4px_rgba(0,0,0,0.25)] rounded-[25px] text-white no-underline mx-[5px] text-center transition-shadow duration-200 ease-[ease] hover:shadow-[0px_4px_4px_rgba(0,0,0,0.25),inset_0px_0px_16px_5px_rgba(0,0,0,0.25)]">
        Voir nos catégories
      </a>
      <a href="{{ path('app_profil') }}" class="px-[40px] py-[11px] bg-[#369354] shadow-[0px_4px_4px_rgba(0,0,0,0.25)] rounded-[25px] text-white no-underline mx-[5px] text-center transition-shadow duration-200 ease-[ease] hover:shadow-[0px_4px_4px_rgba(0,0,0,0.25),inset_0px_0px_16px_5px_rgba(0,0,0,0.25)]">
        Accéder à votre profil
      </a>
    {% else %}
      <a href="{{ path('app_login') }}" class="px-[40px] py-[11px] bg-[#369354] shadow-[0px_4px_4px_rgba(0,0,0,0.25)] rounded-[25px] text-white no-underline mx-[5px] text-center transition-shadow duration-200 ease-[ease] hover:shadow-[0px_4px_4px_rgba(0,0,0,0.25),inset_0px_0px_16px_5px_rgba(0,0,0,0.25)]">
        Connectez-vous !
      </a>
      <a href="{{ path('app_register') }}" class="px-[40px] py-[11px] bg-[#369354] shadow-[0px_4px_4px_rgba(0,0,0,0.25)] rounded-[25px] text-white no-underline mx-[5px] text-center transition-shadow duration-200 ease-[ease] hover:shadow-[0px_4px_4px_rgba(0,0,0,0.25),inset_0px_0px_16px_5px_rgba(0,0,0,0.25)]">
        Inscrivez-vous !
      </a>
    {% endif %}
  </div>
</header>

	<div class="header-title color-fond2 font-title">
		<h1>Nos Catégorie Populaires</h1>
	</div>

<section class="flex flex-wrap items-center justify-center gap-5 max-w-[1400px] mx-auto">

		{% for categorie in categorie|slice(0, 4) %}
			<a href="{{ path('app_sous-categorie', {'id': categorie.id}) }}" class="card-categorie-link">
				<div class="card-categorie color-fond2">
					<div class="card-categorie-img">
						<img src="{{ categorie.image|e('html_attr') }}" alt="{{ categorie.nom|e('html_attr') }}">
					</div>
					<h2 class="font-title">{{ categorie.nom|e('html_attr') }}</h2>
				</div>
			</a>
		{% else %}

			<h1 class="color-erreur-text">Erreur dans le chargement des catégories</h1>
		{% endfor %}
	</section>

	<div class="header-title color-fond2 font-title">
		<h1>Toutes nos catégories</h1>
	</div>

	<section class="flex flex-wrap items-center justify-center gap-5 max-w-[1920px] mx-auto">
		{% for categorie in categorie%}
			<a href="{{ path('app_sous-categorie', {'id': categorie.id}) }}" class="card-autre-categorie-link">
				<div class="card-autre-categorie color-fond2">

					<div class="card-autre-categorie-img">
						<img src="{{ categorie.image|e('html_attr') }}" alt="{{ categorie.nom|e('html_attr') }}">
					</div>

					<h2 class="font-title">{{ categorie.nom|e('html_attr') }}</h2>

				</div>
			</a>
		{% else %}

			<h1 class="color-erreur-text">Erreur dans le chargement des catégories</h1>
		{% endfor %}
	</section>

	<div class="header-title color-fond2 font-title">
		<h1>Nos Produits Populaires</h1>
	</div>

	<section class="flex flex-wrap items-center justify-center gap-5 max-w-screen-2xl mx-auto">


		{% for produit in produit|slice(0, 4) %}

			<div class="card-produit color-fond2">

				<div class="card-produit-img">
					<img src="{{ produit.image|e('html_attr') }}" alt="{{ produit.libellecourt|e('html_attr') }}">
				</div>
				<h2 class="font-title">{{produit.libellecourt|e('html_attr')}}</h2>
				<a class="color-secondLien" href="{{ path('app_sous_categorie', {'id': produit.sousCategorie.id}) }}">{{produit.souscategorie.nom|e('html_attr')}}</a>
				<p>
					{% if produit.promotion is not null and produit.promotion > 0 %}
						{% if app.user %}
							<span class="card-produit-promotion color-secondLien">
								{{ produit.prixHt * app.user.coefficient | number_format(2, '.', ' ') }}</span>


							{{ produit.prixHt * app.user.coefficient * (1 - produit.promotion) | number_format(2, '.', ' ') }}
						{% else %}
							<span class="card-produit-promotion color-secondLien">{{ produit.prixHt * 1.2 | number_format(2, '.', ' ') }}</span>
							{{ produit.prixHt * 1.2 * (1 - produit.promotion) | number_format(2, '.', ' ') }}
						{% endif %}
						€
					{% else %}
						{% if app.user %}
							{{ produit.prixHt * app.user.coefficient | number_format(2, '.', ' ') }}
						{% else %}
							{{ produit.prixHt * 1.2 | number_format(2, '.', ' ') }}
						{% endif %}
						€
					{% endif %}

				</p>

				<a class="card-produit-btn" href="{{ path('app_produit', {'id': produit.id}) }} ">Voir le produit</a>

			</div>
		{% else %}

			<h1 class="color-erreur-text">Erreur dans le chargement des produits</h1>
		{% endfor %}

	</section>


{% endblock %}
